define("support/visualVariables",["require","exports","esri/renderers/SimpleRenderer"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.renderers={surroundings:{default:{renderer:{type:"simple",symbol:{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:[100,100,100,1],colorMixMode:"replace"},edges:{type:"solid",color:[30,30,30,1]}}]}},opacity:1},surroundings:{renderer:{type:"simple",symbol:{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:[255,255,255,1],colorMixMode:"tint"},edges:{type:"solid",color:[30,30,30,1]}}]}}},floors:{opacity:0}},mainBuilding:{default:{renderer:new r({symbol:{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:[255,184,1,1],colorMixMode:"replace"},edges:{type:"solid",color:[0,0,0,1]}}]}}),opacity:1},floors:{renderer:new r({symbol:{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:[255,255,255,1],colorMixMode:"replace"},edges:{type:"solid",color:[30,30,30,1]}}]}})},surroundings:{renderer:null}}},t.definitionExpressions={basic:"BldgLevel IS NULL OR BldgLevel IS NOT NULL AND Category <> 'Generic Models'",floor:function(e,t){return void 0===t&&(t=" AND Category <> 'Generic Models'"),"BldgLevel = "+e+t}}}),define("support/buildingSceneLayerUtils",["require","exports","esri/layers/buildingSublayers/BuildingComponentSublayer","support/visualVariables"],function(e,t,n,s){Object.defineProperty(t,"__esModule",{value:!0}),t.updateSubLayersSymbolLayer=function(e,i,o){e.when(function(){e.allSublayers.forEach(function(e){if(e instanceof n&&e.renderer.clone){var t=e.renderer.clone(),r=t.symbol.symbolLayers.getItemAt(0);i.forEach(function(e,t){t===i.length-1?r[e]=o:r=r[e]}),e.renderer=t}})})},t.updateSubLayers=function(e,i,o){e.when(function(){e.allSublayers.forEach(function(e){var r=e;i.forEach(function(e,t){t===i.length-1?r[e]=o:r=r[e]})})})},t.goThroughSubLayers=function(e,t){e.when(function(){e.allSublayers.forEach(function(e){t(e)})})},t.getVisualVarsFromAppState=function(e,t,r){var i=s.renderers[t].default[r],o=s.renderers[t][e.pageLocation]?s.renderers[t][e.pageLocation][r]:void 0;return void 0!==o?o:i}}),define("support/BuildingVisualisation",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/core/Accessor","esri/core/watchUtils","support/visualVariables","support/buildingSceneLayerUtils"],function(e,t,r,i,o,n,s,a,p){return function(t){function e(e){var r=t.call(this)||this;return r.initialRenderer={},r.initialDefExp={},r.initialVisibility={},r.appState=e.appState,r.layer=e.layer,e.floorMapping&&(r.floorMapping=e.floorMapping),e.extraQuery&&(r.extraQuery=e.extraQuery),p.goThroughSubLayers(e.layer,function(e){"building-component"===e.type&&(r.initialRenderer[e.title]=e.renderer)}),p.goThroughSubLayers(e.layer,function(e){"building-component"===e.type&&(r.initialDefExp[e.title]=e.definitionExpression)}),p.goThroughSubLayers(e.layer,function(e){r.initialVisibility[e.title]=e.visible}),s.init(r,"layerRenderer",r._updateBaseRenderer),s.init(r,"customBaseRenderer",r._updateBaseRenderer),s.init(r,"layerDefinitionExpression",function(t){r.appState.pageLocation&&"floors"===r.appState.pageLocation?p.goThroughSubLayers(r.layer,function(e){"building-component"===e.type&&(e.definitionExpression=t)}):p.goThroughSubLayers(r.layer,function(e){"building-component"===e.type&&(e.definitionExpression=r.initialDefExp[e.title])})}),r}return r(e,t),Object.defineProperty(e.prototype,"layerRenderer",{get:function(){return p.getVisualVarsFromAppState(this.appState,"mainBuilding","renderer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerOpacity",{get:function(){return p.getVisualVarsFromAppState(this.appState,"mainBuilding","opacity")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layerDefinitionExpression",{get:function(){return"floors"===this.appState.pageLocation?a.definitionExpressions.floor(this.floorMapping(this.appState.floorNumber),this.extraQuery):a.definitionExpressions.basic},enumerable:!0,configurable:!0}),e.prototype.normalizeCtorArgs=function(e){return{appState:e.appState}},e.prototype._updateBaseRenderer=function(){var t=this;this.customBaseRenderer?p.updateSubLayers(this.layer,["renderer"],this.customBaseRenderer):this.appState.pageLocation&&"home"!==this.appState.pageLocation?p.updateSubLayers(this.layer,["renderer"],this.layerRenderer):p.goThroughSubLayers(this.layer,function(e){"building-component"===e.type&&(e.renderer=t.initialRenderer[e.title]&&t.initialRenderer[e.title].clone())})},e.prototype.floorMapping=function(e){return e},i([o.property()],e.prototype,"layer",void 0),i([o.property({readOnly:!0,dependsOn:["appState.pageLocation","appState.floorNumber"]})],e.prototype,"layerRenderer",null),i([o.property()],e.prototype,"customBaseRenderer",void 0),i([o.property({readOnly:!0,dependsOn:["appState.pageLocation","appState.floorNumber"]})],e.prototype,"layerOpacity",null),i([o.property({readOnly:!0,dependsOn:["appState.pageLocation","appState.floorNumber"]})],e.prototype,"layerDefinitionExpression",null),i([o.property({constructOnly:!0})],e.prototype,"appState",void 0),i([o.property()],e.prototype,"extraQuery",void 0),e=i([o.subclass("support/BuildingVisualisation")],e)}(o.declared(n))}),define("widgets/Popup/PopupInfo",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/core/Accessor"],function(e,t,r,i,o,n){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.active=!0,e}return r(e,t),i([o.property()],e.prototype,"image",void 0),i([o.property()],e.prototype,"credit",void 0),i([o.property()],e.prototype,"active",void 0),e=i([o.subclass()],e)}(o.declared(n))}),define("AppState",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/core/Accessor"],function(e,t,r,i,o,n){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.floorNumber=0,e}return r(e,t),i([o.property()],e.prototype,"pageLocation",void 0),i([o.property()],e.prototype,"floorNumber",void 0),i([o.property()],e.prototype,"view",void 0),i([o.property()],e.prototype,"buildingLayer",void 0),i([o.property()],e.prototype,"popupInfo",void 0),e=i([o.subclass("AppState")],e)}(o.declared(n))}),define("sections/Section",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/Widget"],function(e,t,r,i,o,n){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.active=!1,e}return r(e,t),e.prototype.onEnter=function(){},e.prototype.onLeave=function(){},e.prototype.postInitialize=function(){var t=this;this.own(this.watch("camera",function(e){e&&t.emit("go-to",e)}))},i([o.property()],e.prototype,"appState",void 0),i([o.property()],e.prototype,"title",void 0),i([o.property()],e.prototype,"id",void 0),i([o.property()],e.prototype,"camera",void 0),i([o.property()],e.prototype,"active",void 0),e=i([o.subclass("sections/Section")],e)}(o.declared(n))}),define("sections/Sections",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/core/Collection","sections/Section"],function(e,t,r,o,n,s,i,a){return function(i){function e(e,t){var r=i.call(this,e.map(function(e){e.appState=t}))||this;return r.previousActiveSection=null,r.activeSectionNode=null,r.previousActiveSectionNode=null,r.appState=t,r.watch("appState.pageLocation",r.activateSection),r}return r(e,i),Object.defineProperty(e.prototype,"activeSection",{set:function(t){t!==this._get("activeSection")&&(this.previousActiveSection=this.activeSection,this.previousActiveSection&&this.previousActiveSection.onLeave(),this.forEach(function(e){e.active=e===t}),this.appState.pageLocation=t?t.id:null,this._set("activeSection",t),this.activeSection&&this.activeSection.onEnter()),this.activeSection.camera&&this.emit("go-to",this.activeSection.camera)},enumerable:!0,configurable:!0}),e.prototype.activateSection=function(t){t instanceof a&&(this.activeSection=t),"string"==typeof t&&(this.activeSection=this.find(function(e){return e.id===t})),"number"==typeof t&&(this.activeSection=this.getItemAt(t))},e.prototype.paneLeft=function(e){void 0===e&&(e=!0);var t=this.swapPanes("render",e);return s.tsx("div",{id:"pane-left"},t)},e.prototype.paneRight=function(e){void 0===e&&(e=!0);var t=this.swapPanes("paneRight",e);return s.tsx("div",{id:"pane-right"},t)},e.prototype.menu=function(){var r=this,e=this.map(function(e,t){return[0!==t?s.tsx("span",{class:"slash"},"/ "):null,r.renderOneSectionMenu(e,t)]});return s.tsx("div",{id:"menu"},e.toArray())},e.prototype.renderOneSectionMenu=function(e,t){var r=this,i=e.active?"active":"";return s.tsx("a",{class:i,href:"javascript: void(0)",onclick:function(){r.activateSection(e.id)}},e.title)},e.prototype.swapPanes=function(e,t){void 0===t&&(t=!0);var r=t?"pane":"active pane",i=t?"active pane":"pane",o=this.activeSection?s.tsx("div",{class:r,key:this.activeSection},this.activeSection[e]()):null,n=this.previousActiveSection?s.tsx("div",{class:i,key:this.previousActiveSection},this.previousActiveSection[e]()):null;return s.tsx("div",null,n,o)},o([n.property()],e.prototype,"activeSection",null),o([n.property({constructOnly:!0})],e.prototype,"appState",void 0),e=o([n.subclass("sections/Section")],e)}(n.declared(i))}),define("support/SurroundingsVisualisation",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/core/Accessor","support/buildingSceneLayerUtils","esri/core/watchUtils"],function(e,t,i,o,n,r,s,a){return function(r){function e(e){var t=r.call(this)||this;return t.appState=e.appState,t.layer=e.layer,t.layer.when(function(){a.init(t,"surroundingsRenderer",t._updateBaseRenderer),a.init(t,"customRenderer",t._updateBaseRenderer),a.init(t,"surroundingsOpacity",function(e){t.layer.opacity=e})}),t}return i(e,r),Object.defineProperty(e.prototype,"surroundingsRenderer",{get:function(){return s.getVisualVarsFromAppState(this.appState,"surroundings","renderer")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"surroundingsOpacity",{get:function(){return s.getVisualVarsFromAppState(this.appState,"surroundings","opacity")},enumerable:!0,configurable:!0}),e.prototype._updateBaseRenderer=function(){this.customRenderer?this.layer.renderer=this.customRenderer:this.layer.renderer=this.surroundingsRenderer},o([n.property({readOnly:!0,dependsOn:["appState.pageLocation","appState.floorNumber"]})],e.prototype,"surroundingsRenderer",null),o([n.property()],e.prototype,"customRenderer",void 0),o([n.property({readOnly:!0,dependsOn:["appState.pageLocation","appState.floorNumber"]})],e.prototype,"surroundingsOpacity",null),o([n.property()],e.prototype,"layer",void 0),o([n.property({constructOnly:!0})],e.prototype,"appState",void 0),e=o([n.subclass("support/SurroundingsVisualisation")],e)}(n.declared(r))}),define("support/appUtils",["require","exports","esri/WebScene","esri/views/SceneView","esri/portal/PortalItem","esri/portal/Portal"],function(e,t,o,n,s,a){Object.defineProperty(t,"__esModule",{value:!0}),t.createViewFromWebScene=function(e){var t=new s({id:e.websceneId});e.portalUrl&&(t.portal=new a({url:e.portalUrl}));var r=new o({portalItem:t}),i=new n({container:e.mapContainer,map:r});return i.when(function(){i.padding={left:300},i.popup.autoOpenEnabled=!1}),i.ui.empty("top-left"),i.ui.empty("bottom-left"),i},t.findLayer=function(e,t){return e.find(function(e){return e.title===t})},t.CITY_LAYER_PREFIX="City model",t.MAIN_LAYER_PREFIX="Building",t.FLOOR_POINTS_LAYER_PREFIX="Floor points",t.INTERNAL_INFOPOINTS_LAYER_PREFIX="Floor pictures",t.EXTERNAL_INFOPOINT_LAYER_PREFIX="External pictures",t.SURROUNDINGS_LAYER_PREFIX="Surroundings:"}),define("widgets/Popup/Popup",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,i,o,n,s,r){return function(r){function e(e){var t=r.call(this,e)||this;return t.active=!1,t}return i(e,r),e.prototype.render=function(){var e={active:this.active},t=this.image?s.tsx("img",{src:this.image}):null,r=this.credit?s.tsx("div",{class:"credit"},s.tsx("div",null,this.credit)):null;return s.tsx("div",{bind:this,key:this,class:this.classes("popup",e),onclick:this.onClick.bind(this)},t,r)},e.prototype.onClick=function(e){e.stopPropagation(),this.active=!1},o([n.property({aliasOf:"appState.popupInfo.active"}),s.renderable()],e.prototype,"active",void 0),o([n.property({aliasOf:"appState.popupInfo.image"}),s.renderable()],e.prototype,"image",void 0),o([n.property({aliasOf:"appState.popupInfo.credit"})],e.prototype,"credit",void 0),o([n.property()],e.prototype,"appState",void 0),e=o([n.subclass("widgets/Popup")],e)}(n.declared(r))}),define("BSLDemo",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","sections/Sections","esri/widgets/Widget","esri/core/promiseUtils","support/BuildingVisualisation","support/SurroundingsVisualisation","AppState","support/appUtils","widgets/Popup/Popup"],function(e,t,r,i,o,n,s,a,p,l,c,u,d,y){return function(e){function t(i){var o=e.call(this,i)||this;return o.appState=new u,o.firstRendering=!0,o.view=d.createViewFromWebScene({websceneId:i.websceneId,mapContainer:i.mapContainer,portalUrl:i.portalUrl}),o.sections=new s(i.sections,o.appState),o.view.map.when(function(){p.eachAlways(o.view.map.layers.map(function(e){return o.appState.view.whenLayerView(e)})).then(function(){var e=o.appState.view.map.layers.find(function(e){return-1<e.title.indexOf(d.MAIN_LAYER_PREFIX)});if(!e)throw new Error("Cannot find the main BuildingSceneLayer ("+d.MAIN_LAYER_PREFIX+") in the webscene "+i.websceneId);var t={appState:o.appState,layer:e};i.floorMapping&&(t.floorMapping=i.floorMapping),i.extraQuery&&(t.extraQuery=i.extraQuery),o.buildingLayer=new l(t);var r=o.appState.view.map.layers.find(function(e){return-1<e.title.toLowerCase().indexOf(d.CITY_LAYER_PREFIX.toLowerCase())});r&&(o.surroundingsLayer=new c({layer:r,appState:o.appState}))}),o.sections.forEach(function(t){var e=o.view.map.presentation.slides.find(function(e){return e.title.text===t.title});e?(t.camera=e.viewpoint.camera,o.view.map.presentation.slides.remove(e)):console.error("Could not find a slide for section "+t.title)})}),o.view.when(function(){window.view=o.view,window.appState=o.appState,0<o.sections.length&&o.sections.activateSection(o.sections.getItemAt(0).id)}),o.watch("activeSection",function(e){o.firstRendering=!0,o.renderNow(),setTimeout(function(){o.firstRendering=!1,o.renderNow()},10)}),o}return r(t,e),t.prototype.normalizeCtorArgs=function(e,t){return{mapContainer:e.mapContainer,container:t}},t.prototype.render=function(){return n.tsx("div",null,n.tsx("div",{class:"left side-container"},this.sections.paneLeft(this.firstRendering)),n.tsx("div",{class:"left menu"},this.sections.menu()),n.tsx("div",{class:"right side-container"},this.sections.paneRight(this.firstRendering)))},t.prototype.postInitialize=function(){var t=this;this.own(this.sections.on("go-to",function(e){t.view.goTo(e)})),new y({appState:this.appState,container:"popup"})},i([o.property({aliasOf:"appState.view"})],t.prototype,"view",void 0),i([o.property({aliasOf:"sections.activeSection"})],t.prototype,"activeSection",void 0),i([o.property(),n.renderable()],t.prototype,"sections",void 0),i([o.property()],t.prototype,"appState",void 0),i([o.property({aliasOf:"appState.buildingLayer"})],t.prototype,"buildingLayer",void 0),i([o.property({aliasOf:"appState.surroundingsLayer"})],t.prototype,"surroundingsLayer",void 0),t=i([o.subclass("webSceneViewer.widgets.LayersLoading.LayersLoadingProgressBar")],t)}(o.declared(a))}),define("widgets/Timetable/Timetable",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,i,o,n,s,r){Object.defineProperty(t,"__esModule",{value:!0});var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=function(r){function e(e){var t=r.call(this,e)||this;return t.index=0,t}return i(e,r),Object.defineProperty(e.prototype,"openDate",{get:function(){var e=this.opens.split(":").map(function(e){return parseInt(e)});return new Date(2019,2,18+this.index,e[0],e[1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeDate",{get:function(){var e=this.closes.split(":").map(function(e){return parseInt(e)});return new Date(2019,2,18+this.index,e[0],e[1])},enumerable:!0,configurable:!0}),e.prototype.render=function(){return(new Date).getDay()===this.openDate.getDay()?s.tsx("div",{class:"daytime today"},s.tsx("h3",null,"Today"),s.tsx("div",{class:"schedule"},this.openDate.getHours(),":00 - ",this.closeDate.getHours(),":00")):s.tsx("div",{class:"daytime"},s.tsx("h3",null,a[this.openDate.getDay()]),s.tsx("div",{class:"schedule"},this.openDate.getHours(),":00 - ",this.closeDate.getHours(),":00"))},o([n.property()],e.prototype,"opens",void 0),o([n.property()],e.prototype,"closes",void 0),o([n.property()],e.prototype,"index",void 0),o([n.property({dependsOn:["opens","index"]}),s.renderable()],e.prototype,"openDate",null),o([n.property({dependsOn:["closes","index"]}),s.renderable()],e.prototype,"closeDate",null),e=o([n.subclass("widgets/Timetable")],e)}(n.declared(r));t.DayTimetable=p;var l=function(r){function e(e){var t=r.call(this,e)||this;return t.today=new Date,e.dates.forEach(function(e,t){return e.index=t}),t}return i(e,r),e.prototype.render=function(){var e=this.dates.map(function(e){return e.render()}).toArray();return s.tsx("div",{bind:this,key:this,class:"timetable"},e)},o([n.property(),s.renderable()],e.prototype,"today",void 0),o([n.property(),s.renderable()],e.prototype,"dates",void 0),e=o([n.subclass("widgets/Timetable")],e)}(n.declared(r));t.Timetable=l}),define("widgets/Viewpoints/OneViewpoint",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,i,o,n,s,r){return function(r){function e(e){var t=r.call(this,e)||this;return t.active=!1,t}return i(e,r),e.prototype.render=function(){var e={active:this.active};return s.tsx("li",{bind:this,key:this,class:this.classes("viewpoint",e),onclick:this.onClick.bind(this)},this.slide.title.text)},e.prototype.onClick=function(){event.stopPropagation(),this.active=!0,this.appState.view.goTo(this.slide.viewpoint)},o([n.property()],e.prototype,"slide",void 0),o([n.property()],e.prototype,"appState",void 0),o([n.property(),s.renderable()],e.prototype,"active",void 0),e=o([n.subclass("widgets/Viewpoints/Viewpoint")],e)}(n.declared(r))}),define("widgets/Viewpoints/Viewpoints",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget","esri/core/Collection","esri/core/watchUtils","esri/core/Handles","widgets/Viewpoints/OneViewpoint"],function(e,t,i,o,n,s,r,a,p,l,c){return function(r){function e(e){var t=r.call(this,e)||this;return t.handles=new l,t}return i(e,r),Object.defineProperty(e.prototype,"activeViewpoint",{set:function(t){this.slides.forEach(function(e){e.active=e===t}),this._set("activeViewpoint",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slides",{get:function(){var t=this;return this.appState?this.appState.view.map.presentation.slides.map(function(e){return new c({slide:e,appState:t.appState})}):new a},enumerable:!0,configurable:!0}),e.prototype.render=function(){var e=0<this.slides.length?this.slides.map(function(e){return e.render()}).toArray():null;return 0<this.slides.length?s.tsx("div",{bind:this,key:this,class:"viewpoints"},s.tsx("h2",{class:"slash-title"},"Point of view"),s.tsx("ul",null,e)):null},e.prototype.postInitialize=function(){var e=this;this.appState.view.map.presentation.slides.on("change",function(){return e.notifyChange("slides")}),this.slides.on("change",this.watchActiveSlide.bind(this)),this.watchActiveSlide()},e.prototype.watchActiveSlide=function(){var r=this;this.handles.removeAll(),this.slides.forEach(function(t){r.handles.add(p.init(t,"active",function(e){e&&(r.activeViewpoint=t)}),"active")})},o([n.property()],e.prototype,"appState",void 0),o([n.property()],e.prototype,"activeViewpoint",null),o([n.property({readOnly:!0,dependsOn:["appState.view.map.presentation.slides"]}),s.renderable()],e.prototype,"slides",null),e=o([n.subclass("widgets/Viewpoints")],e)}(n.declared(r))}),define("sections/HomeSection",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","sections/Section","widgets/Viewpoints/Viewpoints","esri/core/watchUtils","esri/core/Handles","support/appUtils","esri/core/Collection","widgets/Popup/PopupInfo"],function(e,t,i,o,n,s,r,a,p,l,c,u,d){return function(r){function e(e){var t=r.call(this,e)||this;return t.title="Overview",t.id="home",t.showExternalPoints=!1,t.handles=new l,t.content=function(e){return t.appState.view.map.portalItem.snippet},t}return i(e,r),Object.defineProperty(e.prototype,"viewpoints",{get:function(){return new a({appState:this.appState})},enumerable:!0,configurable:!0}),e.prototype.render=function(){var e=this.timetable?s.tsx("section",{class:"Hours"},s.tsx("h2",{class:"slash-title"},"Opening hours"),s.tsx("div",null,this.timetable.render())):null,t=this.textTitle?s.tsx("h1",null,this.textTitle):null;return s.tsx("div",{id:this.id},s.tsx("div",{bind:this,key:this},t,this.content(this)),e)},e.prototype.paneRight=function(){var e=this.viewpoints?this.viewpoints.render():null;return s.tsx("div",null,e)},e.prototype.postInitialize=function(){var t=this;p.whenOnce(this,"appState",function(){p.on(t,"appState.view.map.layers","change",function(){t.appState&&0<t.appState.view.map.layers.length&&(t.infoPointsLayer=t.appState.view.map.layers.find(function(e){return-1<e.title.indexOf(c.EXTERNAL_INFOPOINT_LAYER_PREFIX)}),t.infoPointsLayer&&(t.infoPointsLayer.visible=!1,t.infoPointsLayer.outFields=["*"],t.infoPointsLayer.visible=!1,t.infoPointsLayer.popupTemplate.overwriteActions=!0,t.infoPointsLayer.popupTemplate.actions=new u))})}),p.whenOnce(this,"appState.view.map.portalItem.title",function(){t.textTitle=t.appState.view.map.portalItem.title}),p.init(this,"appState.pageLocation",function(e){t.infoPointsLayer&&(t.infoPointsLayer.visible=t.showExternalPoints&&"home"===e)})},e.prototype.onEnter=function(){var r=this;this.viewpoints.activeViewpoint=null,this.handles.add(this.appState.view.on("click",function(e){r.appState.view.hitTest(e).then(function(e){var t=e.results.filter(function(e){return e.graphic.layer===r.infoPointsLayer})[0];t&&(r.appState.popupInfo=new d({image:t.graphic.attributes.url,credit:t.graphic.attributes.title}))})}),"click")},e.prototype.onLeave=function(){this.handles.remove("click")},o([n.property()],e.prototype,"title",void 0),o([n.property()],e.prototype,"id",void 0),o([n.property({constructOnly:!0})],e.prototype,"timetable",void 0),o([n.property(),s.renderable()],e.prototype,"textTitle",void 0),o([n.property()],e.prototype,"appState",void 0),o([n.property()],e.prototype,"infoPointsLayer",void 0),o([n.property({constructOnly:!0})],e.prototype,"showExternalPoints",void 0),o([n.property()],e.prototype,"content",void 0),o([n.property({dependsOn:["appState"],readOnly:!0})],e.prototype,"viewpoints",null),e=o([n.subclass("sections/HomeSection")],e)}(n.declared(r))}),define("widgets/FloorSelector/FloorSelector",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,i,o,n,s,r){return function(r){function e(e){var t=r.call(this,e)||this;return t.maxFloor=4,t.minFloor=0,t}return i(e,r),e.prototype.render=function(){var o=this,e=Array.from(Array(Math.abs(this.minFloor)+this.maxFloor+1).keys()).reverse().map(function(e){var t=e-o.minFloor,r=0===t?"G":t,i={active:o.activeFloor===t};return s.tsx("li",{class:o.classes("level",i),onclick:function(){return o.activeLevel(t)}},r)});return s.tsx("div",{bind:this,key:this,class:"floor-selector"},s.tsx("h2",{class:"slash-title"},"Select floor"),s.tsx("ul",null,e))},e.prototype.activeLevel=function(e){event.stopPropagation(),this.activeFloor=e},o([n.property({aliasOf:"appState.floorNumber"}),s.renderable()],e.prototype,"activeFloor",void 0),o([n.property(),s.renderable()],e.prototype,"maxFloor",void 0),o([n.property(),s.renderable()],e.prototype,"minFloor",void 0),o([n.property({constructOnly:!0})],e.prototype,"appState",void 0),e=o([n.subclass("widgets/FloorSelector")],e)}(n.declared(r))}),define("sections/FloorsSection",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","sections/Section","esri/widgets/Widget","widgets/FloorSelector/FloorSelector","esri/core/watchUtils","esri/widgets/Legend","widgets/Popup/PopupInfo","support/appUtils","esri/core/Handles"],function(e,t,o,n,s,a,r,i,p,l,c,u,d,y){Object.defineProperty(t,"__esModule",{value:!0});var h=function(i){function e(e,t){var r=i.call(this,e)||this;return r.hide=!0,r}return o(e,i),e.prototype.postInitialize=function(){this.legend=new c({view:this.appState.view,layerInfos:[]})},e.prototype.render=function(){return a.tsx("div",{class:this.classes({hide:this.hide})},this.legend.render())},n([s.property(),a.renderable()],e.prototype,"hide",void 0),n([s.property({constructOnly:!0})],e.prototype,"appState",void 0),n([s.property(),a.renderable()],e.prototype,"legend",void 0),e=n([s.subclass()],e)}(s.declared(i)),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playing=!1,e}return o(e,t),Object.defineProperty(e.prototype,"audio",{get:function(){return new Audio(this.audioSrc)},enumerable:!0,configurable:!0}),e.prototype.postInitialize=function(){var t=this;this.watch("audio",function(e){e.addEventListener("ended",function(){e.currentTime=0,t.playing=!1})})},e.prototype.render=function(){var e={playing:this.playing};return a.tsx("button",{class:this.classes(e,"play_button"),onclick:this.onClick,bind:this,key:this},a.tsx("i",{class:"play_button__icon"},a.tsx("div",{class:"play_button__mask"})))},e.prototype.onClick=function(e){this.playing?(this.playing=!1,this.audio.pause()):(this.audio.play(),this.playing=!0)},n([s.property(),a.renderable()],e.prototype,"playing",void 0),n([s.property()],e.prototype,"audioSrc",void 0),n([s.property({dependsOn:["audioSrc"],readOnly:!0})],e.prototype,"audio",null),e=n([s.subclass()],e)}(s.declared(i)),v=function(r){function e(e){var t=r.call(this,e)||this;return t.floor=1,t.playButton=new f,t}return o(e,r),e.prototype.render=function(){var e=this.audio?a.tsx("p",null,"Listen to the name of this floor ",this.playButton.render()):null;return a.tsx("div",null,this.content(this),e)},e.prototype.activate=function(){this.playButton.audio.currentTime=0},n([s.property()],e.prototype,"title",void 0),n([s.property()],e.prototype,"content",void 0),n([s.property()],e.prototype,"subtitle",void 0),n([s.property()],e.prototype,"floor",void 0),n([s.property({aliasOf:"playButton.audioSrc"})],e.prototype,"audio",void 0),n([s.property()],e.prototype,"playButton",void 0),e=n([s.subclass()],e)}(s.declared(i));t.Floor=v;var g=function(r){function e(e){var t=r.call(this,e)||this;return t.title="Floor by floor",t.id="floors",t.layerNameForInfoPoint=d.FLOOR_POINTS_LAYER_PREFIX,t.layerNameForPicturePoint=d.INTERNAL_INFOPOINTS_LAYER_PREFIX,t.handles=new y,t}return o(e,r),e.prototype.render=function(){var e=this.floors?this.floors.getItemAt(this.selectedFloor):null,t=0===this.selectedFloor?"G":this.selectedFloor,r=e?(this.selectedFloor,a.tsx("h1",null,e.title)):null;return e?a.tsx("div",{id:this.id,bind:this,key:this},a.tsx("div",{class:"level"},"floor"),a.tsx("h1",{class:"number"},t),r,a.tsx("h3",{class:"subtitle"},"[",e.subtitle,"]"),a.tsx("div",{class:"content"},e.render())):null},e.prototype.paneRight=function(){var e=this.floorSelector?this.floorSelector.render():null;return a.tsx("div",null,e)},e.prototype.postInitialize=function(){var t=this;l.whenOnce(this,"appState",function(){t.legendWrapper=new h({appState:t.appState},"floorLegend");var e=null!=t.minFloor&&null!=t.maxFloor?{appState:t.appState,minFloor:t.minFloor,maxFloor:t.maxFloor}:{appState:t.appState};t.floorSelector=new p(e),l.on(t,"appState.view.map.layers","change",t.getExtraInfoLayers.bind(t)),l.init(t,"selectedFloor",function(e){t.floors&&t.floors.getItemAt(e).activate(),t.layer&&(t.layer.definitionExpression="level_id = "+e),t.picturePointsLayer&&(t.picturePointsLayer.definitionExpression="level_id = "+e)})})},e.prototype.onEnter=function(){var r=this;this.selectedFloor=1,this.floors&&this.floors.getItemAt(this.selectedFloor).activate(),this.appState.view.environment.lighting.directShadowsEnabled=!1,this.appState.view.environment.lighting.ambientOcclusionEnabled=!1,this.oldDate=this.appState.view.environment.lighting.date,this.appState.view.environment.lighting.date=new Date("Thu Aug 01 2019 03:00:00 GMT+0200 (Central European Summer Time)"),this.handles.add(this.appState.view.on("click",function(e){r.appState.view.hitTest(e).then(function(e){var t=e.results.filter(function(e){return e.graphic.layer===r.picturePointsLayer})[0];t&&(r.appState.popupInfo=new u({image:t.graphic.attributes.url,credit:t.graphic.attributes.title}))})}),"click"),this.legendWrapper.hide=!this.layer,this.layer&&(this.layer.visible=!0),this.picturePointsLayer&&(this.picturePointsLayer.visible=!0)},e.prototype.onLeave=function(){this.handles.remove("click"),this.appState.view.environment.lighting.directShadowsEnabled=!0,this.appState.view.environment.lighting.ambientOcclusionEnabled=!0,this.appState.view.environment.lighting.date=this.oldDate,this.legendWrapper.hide=!0,this.layer&&(this.layer.visible=!1),this.picturePointsLayer&&(this.picturePointsLayer.visible=!1)},e.prototype.getExtraInfoLayers=function(){this.appState&&0<this.appState.view.map.layers.length&&(this.layer||(this.layer=d.findLayer(this.appState.view.map.layers,this.layerNameForInfoPoint),this.layer&&(this.layer.visible=!1,this.legendWrapper.legend.layerInfos=[{layer:this.layer,title:"Legend"}])),this.picturePointsLayer||(this.picturePointsLayer=d.findLayer(this.appState.view.map.layers,this.layerNameForPicturePoint),this.picturePointsLayer&&(this.picturePointsLayer.visible=!1,this.picturePointsLayer.outFields=["*"])))},n([s.property()],e.prototype,"title",void 0),n([s.property()],e.prototype,"id",void 0),n([s.property({aliasOf:"appState.floorNumber"})],e.prototype,"selectedFloor",void 0),n([s.property()],e.prototype,"previousSelectedFloor",void 0),n([s.property()],e.prototype,"floorSelector",void 0),n([s.property()],e.prototype,"legendWrapper",void 0),n([s.property()],e.prototype,"layer",void 0),n([s.property({constructOnly:!0})],e.prototype,"layerNameForInfoPoint",void 0),n([s.property({constructOnly:!0})],e.prototype,"layerNameForPicturePoint",void 0),n([s.property()],e.prototype,"picturePointsLayer",void 0),n([s.property()],e.prototype,"minFloor",void 0),n([s.property()],e.prototype,"maxFloor",void 0),n([s.property({constructOnly:!0})],e.prototype,"floors",void 0),e=n([s.subclass("sections/FloorsSection")],e)}(s.declared(r));t.FloorsSection=g}),define("widgets/Toggle/Toggle",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","esri/widgets/Widget"],function(e,t,r,i,o,n,s){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.active=!1,e}return r(e,t),e.prototype.render=function(){var e={active:this.active},t=n.tsx("div",{class:this.classes("knob")});return n.tsx("div",{bind:this,key:this,class:this.classes("toggle",e),onclick:this.onClick.bind(this)},t)},e.prototype.onClick=function(e){e.stopPropagation(),this.active=!this.active},i([o.property(),n.renderable()],e.prototype,"active",void 0),e=i([o.subclass("widgets/Toggle")],e)}(o.declared(s))}),define("sections/SurroundingsSection",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/core/accessorSupport/decorators","esri/widgets/support/widget","sections/Section","esri/core/Collection","esri/widgets/Widget","widgets/Toggle/Toggle","esri/core/watchUtils","support/appUtils"],function(e,t,i,o,n,s,r,a,p,l,c,u){var d=function(r){function e(e){var t=r.call(this,e)||this;return t.toggle=new l,e.content&&(t.content=e.content.bind(t)),t.watch("active",function(e){e?t.activate():t.deactivate()}),t}return i(e,r),Object.defineProperty(e.prototype,"active",{get:function(){return this.toggle.active},set:function(e){this.toggle.active=e},enumerable:!0,configurable:!0}),e.prototype.activate=function(){this.appState.view.goTo(this.camera),this.layer&&(this.layer.visible=!0)},e.prototype.deactivate=function(){this.layer&&(this.layer.visible=!1)},e.prototype.content=function(){return s.tsx("div",{clas:"content"})},e.prototype.render=function(){var e=this;return s.tsx("div",{key:this,class:this.classes("element",{active:this.active})},s.tsx("h2",{class:"slash-title width-toggle",onclick:function(){return e.active=!e.active}},this.toggle.render(),s.tsx("a",{href:"javascript:return;"},this.title)),s.tsx("div",{clas:"content"},this.content()))},o([n.property()],e.prototype,"toggle",void 0),o([n.property({aliasOf:"toggle.active"}),s.renderable()],e.prototype,"active",null),o([n.property()],e.prototype,"title",void 0),o([n.property()],e.prototype,"layer",void 0),o([n.property()],e.prototype,"appState",void 0),o([n.property()],e.prototype,"camera",void 0),e=o([n.subclass()],e)}(n.declared(p)),y=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.render=function(){return s.tsx("div",null,s.tsx("span",{class:"magnifier-icon"},s.tsx("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"search",class:"svg-inline--fa fa-search fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},s.tsx("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}))),s.tsx("a",{href:"javascript: void(0)",onclick:this.onClick,bind:this,key:this},this.name))},e.prototype.onClick=function(e){this.appState.view.goTo(this.camera)},o([n.property()],e.prototype,"camera",void 0),o([n.property()],e.prototype,"name",void 0),o([n.property()],e.prototype,"appState",void 0),e=o([n.subclass()],e)}(n.declared(p));return function(r){function e(e){var t=r.call(this,e)||this;return t.title="Surroundings",t.id="surroundings",t.own(c.whenOnce(t,"appState",function(){t.appState.view.map.when(function(){t.poiElements=t.appState.view.map.presentation.slides.filter(function(e){return-1<e.title.text.indexOf("Points of Interest:")}).map(function(e){return t.appState.view.map.presentation.slides.remove(e),new y({name:e.title.text.replace("Points of Interest: ",""),camera:e.viewpoint.camera,appState:t.appState})}),c.on(t.appState,"view.map.layers","change",function(){return t.notifyChange("elements")}),c.on(t,"poiElements","change",function(){return t.notifyChange("elements")})})})),t}return i(e,r),Object.defineProperty(e.prototype,"elements",{get:function(){var t=this;if(this.appState&&0<this.appState.view.map.layers.length){var e=this.appState.view.map.layers.filter(function(e){return-1<e.title.indexOf(u.SURROUNDINGS_LAYER_PREFIX)}).map(function(e){return e.visible=!1,new d({title:e.title.replace("Surroundings: ",""),layer:e,appState:t.appState,camera:t.camera})});return 0<this.poiElements.length&&e.push(new d({title:"Points of Interest",appState:this.appState,camera:this.camera,content:function(){var e=t.poiElements.map(function(e){return e.render()});return s.tsx("div",{class:"content"},e.toArray())}})),e}return new a},enumerable:!0,configurable:!0}),e.prototype.render=function(){return s.tsx("div",{id:this.id,key:this},s.tsx("h1",null,"Surroundings"),this.elements.map(function(e){return e.render()}).toArray())},e.prototype.paneRight=function(){return s.tsx("div",null)},e.prototype.onEnter=function(){this.elements.forEach(function(e){return e.active="Points of Interest"===e.title})},e.prototype.onLeave=function(){this.elements.forEach(function(e){return e.active=!1})},o([n.property()],e.prototype,"title",void 0),o([n.property()],e.prototype,"appState",void 0),o([n.property()],e.prototype,"id",void 0),o([n.property()],e.prototype,"poiElements",void 0),o([n.property({dependsOn:["appState.view.map.layers","poiElements"],readOnly:!0}),s.renderable()],e.prototype,"elements",null),e=o([n.subclass("sections/SurroundingsSection")],e)}(n.declared(r))}),define("config",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","esri/widgets/support/widget","sections/HomeSection","sections/FloorsSection","sections/SurroundingsSection","esri/core/Collection","widgets/Timetable/Timetable"],function(e,t,r,i,o,n,s,a,p,l){Object.defineProperty(t,"__esModule",{value:!0}),t.portalUrl="https://zurich.maps.arcgis.com",t.websceneId="543648a92446497db8a92c06ce1ad0b1",t.sections=[new n({content:function(e){return o.tsx("p",null,"Tūranga is a library in Central Christchurch and the main library of Christchurch City Libraries, New Zealand. It is the largest library in the South Island and the third-biggest in New Zealand. The previous Christchurch Central Library opened in 1982 on the corner of Oxford Terrace and Gloucester Street but was closed after the February 2011 Christchurch earthquake and demolished in 2014 to make way for the Convention Centre Precinct.")},timetable:new l.Timetable({dates:new p([new l.DayTimetable({opens:"8:00",closes:"20:00"}),new l.DayTimetable({opens:"8:00",closes:"20:00"}),new l.DayTimetable({opens:"8:00",closes:"20:00"}),new l.DayTimetable({opens:"8:00",closes:"20:00"}),new l.DayTimetable({opens:"8:00",closes:"20:00"}),new l.DayTimetable({opens:"10:00",closes:"17:00"}),new l.DayTimetable({opens:"10:00",closes:"17:00"})])})}),new s.FloorsSection({floors:new p([new s.Floor({title:"He Hononga",subtitle:"connection",audio:"https://my.christchurchcitylibraries.com/wp-content/uploads/sites/5/2019/01/He-Hononga.mp3",floor:0,content:function(e){return o.tsx("div",{id:"connection",bind:e,key:e},o.tsx("p",null,o.tsx("span",null,"Open an hour earlier than the rest of the building on weekdays, He Hononga | Connection, Ground Level is the place to return library items, collect holds, browse magazines, DVDs and new arrivals, visit the café or interact with the Discovery Wall.")))}}),new s.Floor({title:"Hapori",subtitle:"community",audio:"https://my.christchurchcitylibraries.com/wp-content/uploads/sites/5/2019/01/Hapori.mp3",floor:1,content:function(e){return o.tsx("div",{id:"community",bind:e,key:e},o.tsx("p",null,o.tsx("span",null,"It offers experiences geared towards a wide cross-section of our community. Grab a hot drink at the espresso bar, attend an event in our community arena, or help the kids explore the play and craft areas and children’s resources. It’s also a great place for young adults to hang out, play videogames, try out VR or get some study done.")))}}),new s.Floor({title:"Tuakiri",subtitle:"identity",audio:"https://my.christchurchcitylibraries.com/wp-content/uploads/sites/5/2019/01/Tuakiri.mp3",floor:2,content:function(e){return o.tsx("div",{id:"identity",bind:e,key:e},o.tsx("p",null,o.tsx("span",null,"Find resources and services to help you develop your knowledge about your own identity, your ancestors, your whakapapa and also about the place that they called home – its land and buildings.")))}}),new s.Floor({title:"Tūhuratanga",subtitle:"discovery",audio:"https://my.christchurchcitylibraries.com/wp-content/uploads/sites/5/2019/01/T%C5%ABhuratanga.mp3",floor:3,content:function(e){return o.tsx("div",{id:"discovery",bind:e,key:e},o.tsx("p",null,o.tsx("span",null,"Explore the nonfiction collection with thousands of books on a huge range of subjects. Get help with print and online resources for research or recreation. Use the public internet computers or, for those who want a low-key space to read or study, there is a separate room called ‘The Quiet Place’. Study, research or browse for some recreational reading.")))}}),new s.Floor({title:"Auahatanga",subtitle:"creativity",audio:"https://my.christchurchcitylibraries.com/wp-content/uploads/sites/5/2019/01/Auahatanga.mp3",floor:4,content:function(e){return o.tsx("div",{id:"creativity",bind:e,key:e},o.tsx("p",null,o.tsx("span",null,"Browse the World Languages, Music and Fiction collections, including Biographies and Graphic Novels. Visit the two roof gardens with great views across the city. Explore your creativity in the Production Studio using creative technology such as 3D printers and sewing machines. Create and edit music and video using the Audio/Video Studio, or take a class in the Computer Labs with a great range of software available.")))}})])}),new a({})],t.floorMapping=function(e){var t=e+1;return 3<=t&&(t+=1),t},t.extraQuery=" AND (Category <> 'Generic Models' OR OBJECTID_1 = 2) AND Category <> 'Walls' AND Category <> 'Roofs'  AND Category <> 'Curtain Wall Mullions' AND Category <> 'Curtain Panels'"}),define("minimal_config",["require","exports","esri/core/tsSupport/declareExtendsHelper","esri/core/tsSupport/decorateHelper","sections/HomeSection","sections/FloorsSection","sections/SurroundingsSection"],function(e,t,r,i,o,n,s){Object.defineProperty(t,"__esModule",{value:!0}),t.portalUrl="https://zurich.maps.arcgis.com",t.websceneId="8174c171ff234fdeb8700c409b5ab8f7",t.sections=[new o({}),new n.FloorsSection({minFloor:0,maxFloor:2}),new s({})]});